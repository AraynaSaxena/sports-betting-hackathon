# 🏈 Sports Betting AI - Complete Setup & Run Guide

This guide will help you set up and run both the Python overlay generation system and the React web application.

## 🚀 Quick Start (Automated)

### Option 1: Python Script (Recommended)
```bash
python3 setup_and_run.py
```

### Option 2: Shell Script (macOS/Linux)
```bash
./setup_and_run.sh
```

### Option 3: Manual Setup (Step by Step)
Follow the manual steps below if automated setup doesn't work.

---

## 📋 Prerequisites

- **Python 3.8+** - [Download here](https://www.python.org/downloads/)
- **Node.js 16+** - [Download here](https://nodejs.org/)
- **Git** (optional) - For cloning the repository

---

## 🔧 Manual Setup

### Step 1: Python Environment Setup

```bash
# Navigate to project directory
cd sports-betting-hackathon

# Create virtual environment
python3 -m venv .venv

# Activate virtual environment
source .venv/bin/activate  # macOS/Linux
# OR
.venv\Scripts\activate     # Windows

# Install Python dependencies
cd scripts
pip install -r requirements.txt
cd ..
```

### Step 2: React Environment Setup

```bash
# Install Node.js dependencies
npm install

# Fix any security vulnerabilities (optional)
npm audit fix
```

### Step 3: Configuration

#### Python Configuration
Edit `scripts/config.py`:
```python
TEAM_ABBR = "PHI"  # Change to your team (PHI, TEN, TB, etc.)
VIDEO_IN = "../public/game-video.mp4"  # Path to your video
```

#### Add Players (Optional)
Edit `scripts/roster.py` to add players for your team:
```python
add_player("PHI", 20, "Reed Blankenship", "S", "6'1\"", "204", "Middle Tennessee")
```

#### Environment Variables (Optional)
```bash
# Copy environment template
cp .env.example .env

# Edit .env and add your Gemini API key
REACT_APP_GEMINI_API_KEY=your_api_key_here
```

---

## 🎬 Adding Video Content

### Option 1: Use Your Own Video
```bash
# Add your NFL game video
cp your-game-video.mp4 public/game-video.mp4
```

### Option 2: Update Video Path
Edit `scripts/config.py`:
```python
VIDEO_IN = "path/to/your/video.mp4"
```

### Option 3: Demo Mode (No Video)
The app works without video using a simulated football field.

---

## ▶️ Running Everything

### Method 1: Run Both Together
```bash
# Automated setup and run
python3 setup_and_run.py
```

### Method 2: Run Separately

#### Generate Overlays (Python)
```bash
cd scripts
source ../.venv/bin/activate  # macOS/Linux
# OR
..\.venv\Scripts\activate     # Windows

python Prepare_overlay.py
```

#### Start React App
```bash
# In project root directory
npm start
```

The React app will open at `http://localhost:3000`

---

## 📁 Project Structure

```
sports-betting-hackathon/
├── public/
│   ├── game-video.mp4          # Your NFL video (add this)
│   ├── overlay.json            # Generated by Python script
│   └── overlay_annotated.mp4   # Generated annotated video
├── scripts/
│   ├── Prepare_overlay.py      # Main overlay generation script
│   ├── config.py              # Configuration settings
│   ├── roster.py              # Player roster data
│   ├── requirements.txt       # Python dependencies
│   └── run_overlay.py         # Simple runner script
├── src/
│   ├── components/
│   │   ├── OverlayPlayerVideo.jsx  # Video overlay component
│   │   └── ...
│   └── App.js                 # Main React application
├── setup_and_run.py          # Automated setup script
├── setup_and_run.sh          # Shell script version
└── package.json              # Node.js dependencies
```

---

## 🎯 What Each Part Does

### Python Overlay System
- **Detects players** in video using YOLO computer vision
- **Reads jersey numbers** using OCR (PaddleOCR)
- **Matches players** to roster data
- **Generates overlay.json** for the React app
- **Creates annotated video** for review

### React Web Application
- **Authentication system** with responsible gambling features
- **Interactive video player** with player overlays
- **AI-powered betting questions** using Gemini API
- **Financial responsibility checks**
- **Computer vision simulation**

---

## 🔧 Troubleshooting

### Python Issues

**"ModuleNotFoundError"**
```bash
# Make sure virtual environment is activated
source .venv/bin/activate
pip install -r scripts/requirements.txt
```

**"Video file not found"**
- Add video to `public/game-video.mp4`
- Or update `VIDEO_IN` in `scripts/config.py`
- Or run in demo mode (works without video)

**"Poor jersey number detection"**
- Increase `MIN_DIGIT_CONF` in `config.py`
- Adjust crop fractions for better OCR
- Try `yolov8s.pt` for better accuracy

### React Issues

**"Module not found"**
```bash
npm install
```

**"Port 3000 already in use"**
```bash
# Kill existing process
lsof -ti:3000 | xargs kill -9
# Or use different port
PORT=3001 npm start
```

**"API key issues"**
- Copy `.env.example` to `.env`
- Add your Gemini API key
- App works without API key (uses fallback questions)

---

## 🎮 Using the Application

1. **Sign up/Login** with the authentication system
2. **Click player overlays** on the video/field to generate betting questions
3. **Place bets** with financial responsibility warnings
4. **Toggle Computer Vision** to see detection stats
5. **View player stats** and AI-generated questions

---

## 📊 Generated Files

After running the Python script:

- **`public/overlay.json`** - Player detection data for React app
- **`public/overlay_annotated.mp4`** - Video with bounding boxes and labels

---

## 🚀 Production Deployment

For production deployment:

1. **Build React app**: `npm run build`
2. **Set environment variables** properly
3. **Use production video hosting**
4. **Configure proper authentication**
5. **Set up proper API keys**

---

## 🆘 Getting Help

If you encounter issues:

1. Check this troubleshooting guide
2. Ensure all prerequisites are installed
3. Try the automated setup scripts
4. Check console/terminal for error messages
5. Verify file paths and permissions

---

## 🎉 Success!

When everything is working:
- ✅ Python environment with ML dependencies
- ✅ React application running on localhost:3000
- ✅ Player overlays generated (if video provided)
- ✅ Interactive betting interface
- ✅ Authentication and responsible gambling features
